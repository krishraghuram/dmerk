{
    "$schema": "https://json-schema.org/draft/2020-12/schema",
    "$ref": "#/definitions/filesystem",
    "definitions": {
        "digest": {
            "type": "string",
            "pattern": "^[0-9a-f]*$"
        },
        "file": {
            "type": "object",
            "properties": {
                "_digest": {
                    "$ref": "#/definitions/digest"
                },
                "_type": {
                    "const": "file"
                }
            },
            "required": [
                "_digest",
                "_type"
            ]
        },
        "directory": {
            "type": "object",
            "properties": {
                "_digest": {
                    "$ref": "#/definitions/digest"
                },
                "_type": {
                    "const": "directory"
                },
                "_children": {
                    "$ref": "#/definitions/filesystem"
                }
            },
            "required": [
                "_digest",
                "_type"
            ]
        },
        "filesystem": {
            "type": "object",
            "additionalProperties": {
                "type": "object",
                "oneOf": [
                    {
                        "$ref": "#/definitions/file"
                    },
                    {
                        "$ref": "#/definitions/directory"
                    }
                ]
            }
        }
    }
}